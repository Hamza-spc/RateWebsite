{% extends 'base/base.html' %}
{% load static %}

{% block title %}TourInsight - Discover & Rate Amazing Venues{% endblock %}

{% block content %}
<!-- Hero Section with Video Background -->
<div class="relative min-h-screen flex items-center">
    <!-- Video Background -->
    <div class="absolute inset-0 w-full h-full">
        <video class="video-background" autoplay muted loop>
            <source src="{% static 'videos/hero-video.mp4' %}" type="video/mp4">
            <!-- Fallback image if video doesn't load -->
            <div class="w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600"></div>
        </video>
        <div class="video-overlay"></div>
    </div>
    
    <!-- Hero Content -->
    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <!-- Left side - YouTube Video -->
            <div class="hidden lg:block">
                <div class="bg-gray-900 rounded-lg overflow-hidden shadow-2xl">
                    <div class="aspect-video">
                        <iframe 
                            class="w-full h-full" 
                            src="https://www.youtube.com/embed/OycYHUdAWfQ?si=3TOj2LZ0eq7OeS2V&autoplay=1&mute=1&loop=1&playlist=OycYHUdAWfQ&controls=0&showinfo=0&rel=0&modestbranding=1"
                            title="TourInsight Background Video"
                            frameborder="0" 
                            allow="autoplay; encrypted-media" 
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>
            </div>
            
            <!-- Right side - Hero content -->
            <div class="text-center lg:text-left">
                <h1 class="text-4xl md:text-6xl font-bold text-white mb-6">
                    Discover & Rate
                    <span class="block text-yellow-400">Amazing Venues</span>
                </h1>
                <p class="text-xl text-gray-200 mb-8 max-w-2xl">
                    Find the perfect hotels, restaurants, cafés, and attractions with real reviews from travelers like you.
                </p>
                
                <!-- Search Form -->
                <form method="get" action="{% url 'venues:venue_search' %}" class="bg-white rounded-lg p-6 shadow-xl">
                    <div class="space-y-4">
                        <div>
                            <label for="search" class="block text-sm font-medium text-gray-700 mb-2">What are you looking for?</label>
                            <input type="text" id="search" name="q" placeholder="Search venues..." 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="location" class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                                <input type="text" id="location" name="location" placeholder="City or country..." 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                            
                            <div>
                                <label for="category" class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                                <select id="category" name="category" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    <option value="">All Categories</option>
                                    {% for category in categories %}
                                        <option value="{{ category.slug }}">{{ category.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        
                        <button type="submit" 
                                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200">
                            Search Venues
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Statistics Section -->
<div class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Trusted by Travelers Worldwide</h2>
            <p class="text-lg text-gray-600">Join thousands of users discovering amazing places</p>
        </div>
        
        <div class="grid grid-cols-2 md:grid-cols-5 gap-8">
            <div class="text-center">
                <div class="text-3xl font-bold text-indigo-600 mb-2">{{ stats.total_hotels|add:stats.total_restaurants|add:stats.total_cafes|add:stats.total_attractions }}+</div>
                <div class="text-sm text-gray-600">Venues Listed</div>
            </div>
            <div class="text-center">
                <div class="text-3xl font-bold text-indigo-600 mb-2">{{ stats.total_hotels }}+</div>
                <div class="text-sm text-gray-600">Hotels</div>
            </div>
            <div class="text-center">
                <div class="text-3xl font-bold text-indigo-600 mb-2">{{ stats.total_restaurants|add:stats.total_cafes }}+</div>
                <div class="text-sm text-gray-600">Restaurants & Cafés</div>
            </div>
            <div class="text-center">
                <div class="text-3xl font-bold text-indigo-600 mb-2">{{ stats.total_attractions }}+</div>
                <div class="text-sm text-gray-600">Attractions</div>
            </div>
            <div class="text-center">
                <div class="text-3xl font-bold text-indigo-600 mb-2">{{ stats.total_users }}+</div>
                <div class="text-sm text-gray-600">User Ratings</div>
            </div>
        </div>
    </div>
</div>

<!-- Featured Venues Section -->
{% if featured_venues %}
<div class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Featured Venues</h2>
            <p class="text-lg text-gray-600">Discover some of our top-rated places</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for venue in featured_venues %}
            <div class="bg-white rounded-lg shadow-lg overflow-hidden card-hover">
                {% if venue.images.first %}
                    <img src="{{ venue.images.first.image.url }}" alt="{{ venue.name }}" class="w-full h-48 object-cover">
                {% else %}
                    <div class="w-full h-48 bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center">
                        <span class="text-white text-lg font-semibold">{{ venue.name|first|upper }}</span>
                    </div>
                {% endif %}
                
                <div class="p-6">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-xl font-semibold text-gray-900">{{ venue.name }}</h3>
                        <div class="flex items-center">
                            <span class="text-yellow-400">★</span>
                            <span class="ml-1 text-gray-600">{{ venue.average_rating|floatformat:1 }}</span>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 text-sm mb-2">{{ venue.category.name }}</p>
                    <p class="text-gray-500 text-sm mb-4">{{ venue.city }}, {{ venue.country }}</p>
                    
                    <p class="text-gray-700 text-sm mb-4 line-clamp-2">{{ venue.description|truncatewords:20 }}</p>
                    
                    <a href="{% url 'venues:venue_detail' venue.slug %}" 
                       class="inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
                        View Details
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-12">
            <a href="{% url 'venues:venue_list' %}" 
               class="inline-block bg-white hover:bg-gray-50 text-indigo-600 font-semibold py-3 px-8 rounded-lg border-2 border-indigo-600 transition duration-200">
                View All Venues
            </a>
        </div>
    </div>
</div>
{% endif %}

<!-- How It Works Section -->
<div class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">How It Works</h2>
            <p class="text-lg text-gray-600">Simple steps to discover and rate amazing venues</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="text-center">
                <div class="bg-indigo-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Search</h3>
                <p class="text-gray-600">Find venues by location, category, or name. Use our powerful search to discover exactly what you're looking for.</p>
            </div>
            
            <div class="text-center">
                <div class="bg-indigo-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Rate & Review</h3>
                <p class="text-gray-600">Share your experience by rating venues and writing detailed reviews to help other travelers.</p>
            </div>
            
            <div class="text-center">
                <div class="bg-indigo-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">Discover</h3>
                <p class="text-gray-600">Explore new places based on authentic reviews and ratings from our community of travelers.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Auto-hide messages after 5 seconds
    document.addEventListener('DOMContentLoaded', function() {
        const messages = document.querySelectorAll('.alert');
        messages.forEach(function(message) {
            setTimeout(function() {
                message.style.transition = 'opacity 0.5s';
                message.style.opacity = '0';
                setTimeout(function() {
                    message.remove();
                }, 500);
            }, 5000);
        });
    });
</script>
{% endblock %}
